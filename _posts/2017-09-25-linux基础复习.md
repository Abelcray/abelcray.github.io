# linux基础杂项一

<!--markdown-->Linux是一个***自由***的，***免费***的，***源码开放***的操作系统。
废话不多说，直接开始吧！

本系列干货以CentOS7为操作系统。
1、计算机开机启动流程：
  加电 → BIOS自检 → 加载硬盘MBR分区表 → boot loader → Lilo/GRUB → kelnel(系统内核) → init（进入系统）

2、linux启动级别

   linux启动分为7个级别：

```
init 0  关闭所有进程，关机
init 1  单用户模式
init 2  无网络多用户模式（无NFS的多用户模式）
init 3  完全多用户模式（常用模式）
init 4  保留（可自定义）
init 5  图形界面模式
init 6  重启
```

3、linux忘记root密码怎么办？

 1） 重启系统后在读秒的时候按下“e”键进入内核编辑模式；

 2）在在linux16/linux/linuxefi所在参数行ro更改为rw 并将后面改为init=/sysroot/bin/sh；

 3）按crtl+x重启；

 4）输入命令 chroot /sysroot 修改根目录；

 5）运行passwd命令修改密码，并运行命令touch ./autorelabel

 6）运行exec /sbin/init或者exec /sbin/reboot来正常启动。


# linux基础杂项二

<!--markdown-->'*'为通配符    hisroty 命令查看已经执行过的命令，后加 '!'加编号提取曾经执行过的命令

cp命令三原则：

```
1.目的地址是一个目录，则拷贝到目录下；
2.目的地址是一个文件，则拷贝过来后修改名称；
3.如果目的地址不存在，则拷贝源文件过来。
```

head和tail分别表示查看文件头部前十行和尾部后十行的命令。
常用参数 -n +number 表示显示多少行    -f为tail的参数为实时显示内容
more和less 表示打开整个文件，less命令中小写n表示向下翻页，大写N表示向上翻页。
'>'表示标准输入（清空覆盖），'>>'表示标准输入（追加）
du命令显示文件所占磁盘大小 -s只显示占用容量大小  -h详细显示内存单位（M，G）
df命令查看文件系统信息  -h显示详细信息 -T显示文件系统类型

vi命令 三种模式:命令行模式、文本输入模式、末行模式

命令行模式：

```
yy 复制（yy复制光标所在整行，行数+yy复制n行） 
p  粘贴 (粘贴到光标下一行)
dd 剪切（与yy用法相同）        
u 恢复（相当于windows下撤回的用法）
```

文本输入模式：

```
按i进入文本输入模式（按o为另起一行进入输入模式）
按ESC键退出
```

末行模式：

```
搜索： /要搜索内容（按n键查找下一个目标）  
替换： s/目标字符/目的字符 （替换单个，后加/g参数为替换整行中要替换的字符；替换1到10行中字符1，10 s/key/word/g 替换全部的符号为%）
显示行号：set nu     
出现编辑错误可以删除“.1.txt.swap”文件
按:后输入q为退出，w为保存,!为强制符号，q!为强制退出
```


# linux基础杂项三

<!--markdown-->用户以及权限管理

linux用户分为三种：root用户（uid=0）、系统用户（uid=1~999）、普通用户（uid=1000）

一个用户最多有31个附属组

用户文件介绍：

```
/etc/passwd 保存用户信息
/etc/shadow 保存用户密码（以加密形式保存）
/etc/group  保存用户组信息
/etc/login.defs 用户属性限制等
/etc/default/useradd  默认的useradd配置文件
```

用户家目录内bash文件模板在/etc/skel文件中

passwd文件中信息解析：
    用户名：密码是否加密：用户uid：用户gid：注释：家目录：shell

shadow文件中：
    用户名：密码：上次修改密码日期：密码不可被变更天数：密码需要被重置天数（99999表示不需要重置）：密码变更前提前几天警告：账号失效日期：账号取消日期：保留条目

用户创建：useradd -d 指定家目录     -g 指定GID     -G 指定用户附属组    -m 创建用户家目录
         -s 指定用户shell     -u 指定用户UID

删除用户：userdel -r 删除用户关联目录

修改用户：usermod    groupadd 创建用户组    groupdel 删除用户组

权限

```
r(read)读取 4    
w(write)写入 2    
x(execute)执行 1 --对于文件夹来说x为可查看权限
```

**权限授权给三种角色：user（U）、group(G)、other(O)**

三个特殊权限： 

```
SUID   = 4  u+s 以文件所属用户执行，而非执行文件的用户
SGID   = 2  g+s 以文件所属组身份执行，在该目录中创建新文件的所属组与该目录的所属组相同
STICKY = 1  o+t 对目录拥有写权限的用户仅能删除其拥有的文件
```

chown 修改所属者以及所属组 -R 表示递归

chmod 修改目录以及文件权限

# linux基础杂项四

<!--markdown-->磁盘管理

fdisk  /dev/sda  查看和修改磁盘分区
常用参数： d 删除分区    n 新建分区    q 退出    w 保存    p 打印磁盘分区    m 查看帮助

LVM逻辑卷

```
    PE 物理拓展  →  PV 物理卷  →  VG 卷组  →  LV 逻辑卷

pvcreate 新建PV     pvdisplay 显示PV    pvremove 删除PV

vgcreate  卷组名    物理卷路径

lvcreate -n 指定逻辑卷名    -L 指定容量    vg卷组名

扩容 lvextend -L 扩充容量 lv名    压缩容量（压缩容量前要卸载所挂目录） lvreduce -L 指定容量 lv名
```

软件包管理

  rpm本地安装工具（需先下载安装包到本地）

```
常用参数： 
-i 安装     -v 详细信息     -h（和-V一起使用）     -e 卸载     --nodeps 不验证包依赖
-U 更新     -qa 查看所有安装包     -qc 查询软件的配置文件     -ql 查看软件包所有文件位置
-qf 通过配置文件反查软件包     -qi 查看软件包的详细信息     -qpi 查看未安装软件包的详细信息
-qp  -scripts 查看软件包的安装脚本
```

  yum源安装（在此只提供本地yum源配置教程）
    

```
配置本地yum源
mv /etc/yum.repo.d/* /home/root/
touch /etc/yum.repo.d/cdrom.repo
vi /etc/yum.repo.d/cdrom.repo 按i输入
[cdrom]
name=cdrom
baseurl=file:///mnt/cdrom
gpgcheck=0
enabled=1
输入完成之后按esc键再按：冒号输入wq退出
mkdir /mnt/cdrom
mount /dev/cdrom /mnt/cdrom  （虚拟机要挂载光盘，如果是挂载镜像则把/dev/cdrom/换成镜像目录即可）
yum clean all
yum list
```

​    

```
常用参数
install 安装     erase(remove) 卸载     search 查找     update 更新
provides 查询命令所在的安装包     
```




